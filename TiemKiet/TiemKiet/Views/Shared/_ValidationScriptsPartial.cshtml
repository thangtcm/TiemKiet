<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js"
        integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g=="
        crossorigin="anonymous" referrerpolicy="no-referrer"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-migrate/3.4.1/jquery-migrate.min.js"
        integrity="sha512-KgffulL3mxrOsDicgQWA11O6q6oKeWcV00VxgfJw4TcM8XRQT8Df9EsrYxDf7tpVpfl3qcYD96BpyPvA4d1FDQ=="
        crossorigin="anonymous" referrerpolicy="no-referrer"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/waypoints/4.0.1/jquery.waypoints.min.js"
        integrity="sha512-CEiA+78TpP9KAIPzqBvxUv8hy41jyI3f2uHi7DGp/Y/Ka973qgSdybNegWFciqh6GrN2UePx2KkflnQUbUhNIA=="
        crossorigin="anonymous" referrerpolicy="no-referrer"></script>
<script src="https://cdn.jsdelivr.net/npm/jquery.stellar@0.6.2/jquery.stellar.min.js"></script>
<script src="~/js/scrolljax.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.sticky/1.0.4/jquery.sticky.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-animateNumber/0.0.14/jquery.animateNumber.min.js"></script>
<script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/magnific-popup.js/1.1.0/jquery.magnific-popup.min.js"
        integrity="sha512-IsNh5E3eYy3tr/JiX2Yx4vsCujtkhwl7SLqgnwLNgf04Hrt9BT9SXlLlZlWx+OK4ndzAoALhsMNcCmkggjZB1w=="
        crossorigin="anonymous" referrerpolicy="no-referrer"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/magnific-popup.js/1.1.0/jquery.magnific-popup.min.js"
        integrity="sha512-IsNh5E3eYy3tr/JiX2Yx4vsCujtkhwl7SLqgnwLNgf04Hrt9BT9SXlLlZlWx+OK4ndzAoALhsMNcCmkggjZB1w=="
        crossorigin="anonymous" referrerpolicy="no-referrer"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/js/select2.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/intl-tel-input@18.2.1/build/js/intlTelInput.min.js"></script>
<script src="~/lib/owlcarousel/owl.carousel.min.js"></script>
<script src="~/js/moment-with-locales.min.js"></script>
<script src="~/js/bootstrap-datetimepicker.min.js"></script>
<script src="https://www.gstatic.com/firebasejs/10.7.0/firebase-app.js" type="text/javascript"></script>
<script src="https://www.gstatic.com/firebasejs/10.7.0/firebase-analytics.js" type="text/javascript"></script>
<script src="~/js/main.js"></script>
<script src="~/js/func.js"></script>

<script>
    $('#phoneNumber').on('input', function () {
        var phoneNumber = $(this).val();
        console.log(phoneNumber);
        var sendOTPBtn = $('#sendOTPBtn');
        var phoneNumberError = $('#phoneNumberError');

        if (isValidPhoneNumber(phoneNumber)) {
            sendOTPBtn.prop('disabled', false);
            phoneNumberError.text(''); // Xóa thông báo lỗi nếu có
        } else {
            sendOTPBtn.prop('disabled', true);
            phoneNumberError.text('Số điện thoại không hợp lệ.');
        }
    });
    initializeForm('#formregister', register);
    initializeForm('#confirmOTP', confirmOTP);
    initializeForm('#formlogin', loginOTP);

    $(function (){
        var token = null;

        const firebaseConfig = {
            apiKey: "AIzaSyAXK3Zho4-QwdwKowzrmZVRpBbjxBNDtxw",
            authDomain: "leafcoffee-66175.firebaseapp.com",
            projectId: "leafcoffee-66175",
            storageBucket: "leafcoffee-66175.appspot.com",
            messagingSenderId: "189337812695",
            appId: "1:189337812695:web:57b971e4f3acaf508cba92",
            measurementId: "G-MKB2F9R564"
        };

        firebase.initializeApp(firebaseConfig);
        const messaging = firebase.messaging();
        messaging.requestPermission()
            .then(function(){
                console.log("granted");
                if(isTokenSentToServer()){
                    console.log("alredy granted");
                }
                else
                {
                    getRegToken();
                }
            });

        function getRegToken(){
            messaging.getToken().then(currentToken) => {
                if(currentToken){
                    console.log(currentToken);
                }
            }).catch((err) => {

            });
        }

        messaging.onMessage(function (payload) {
            $('')
        })
    })
</script>
